<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Modificar Perfil</title>
    <!-- Añade aquí tus estilos o referencias a CSS -->
</head>
<body>
    <h2>Modificar Perfil</h2>
    <form id="formPerfil" action="pages/backend/usuario/modificar_perfil.php" method="POST" enctype="multipart/form-data">
        <!-- Cambio de Contraseña -->
        <div>
            <label for="passwordActual">Contraseña Actual:</label>
            <input type="password" id="passwordActual" name="passwordActual" required>
        </div>
        <div>
            <label for="nuevaPassword">Nueva Contraseña:</label>
            <input type="password" id="nuevaPassword" name="nuevaPassword" required>
        </div>
        <div>
            <label for="confirmarPassword">Confirmar Nueva Contraseña:</label>
            <input type="password" id="confirmarPassword" name="confirmarPassword" required>
        </div>

        <!-- Cargar Nueva Foto de Perfil -->
        <div>
            <label for="fotoPerfil">Foto de Perfil:</label>
            <input type="file" id="fotoPerfil" name="fotoPerfil" accept="image/*">
        </div>

        <button type="submit" name="modificarPerfil">Modificar Perfil</button>
    </form>

    <script>
        // Aquí puedes añadir JavaScript si es necesario
    </script>
</body>
</html>
<script>
    document.getElementById('formPerfil').addEventListener('submit', function(event) {
        var password = document.getElementById('nuevaPassword').value;
        var confirmPassword = document.getElementById('confirmarPassword').value;

        // Validar que las contraseñas coincidan
        if (password !== confirmPassword) {
            alert('Las contraseñas no coinciden.');
            event.preventDefault(); // Prevenir el envío del formulario
            return false;
        }

        // Validar el tamaño y tipo de la foto de perfil, si se ha seleccionado una
        var fotoPerfil = document.getElementById('fotoPerfil').files[0];
        if (fotoPerfil) {
            // Tamaño máximo del archivo en bytes (ejemplo: 5MB)
            var maxTamano = 5 * 1024 * 1024;
            if (fotoPerfil.size > maxTamano) {
                alert('La foto de perfil es demasiado grande. El tamaño máximo permitido es de 5MB.');
                event.preventDefault();
                return false;
            }

            // Validar el tipo de archivo
            var tipoPermitido = /(\.jpg|\.jpeg|\.png|\.gif)$/i;
            if (!tipoPermitido.exec(fotoPerfil.name)) {
                alert('El formato de la foto de perfil no es válido. Solo se permiten archivos JPG, JPEG, PNG y GIF.');
                event.preventDefault();
                return false;
            }
        }

        // Si todo está correcto, permite que el formulario se envíe
        return true;
    });
</script>
